‚Äî –ü–µ—Ä–µ–π—Ç–∏ –≤ [[HUB]] ‚Äî
> [!INFO ] –ß—Ç–æ —Ç–∞–∫–æ–µ **Docker**?
> –≠—Ç–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–ø–∞–∫–æ–≤—ã–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å–æ –≤—Å–µ–º–∏ –∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ (–±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏, —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏, –∫–æ–¥–æ–≤ –∏ —Å—Ä–µ–¥–æ–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è) –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–æ–≤–∞–Ω–Ω—ã–µ, –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –µ–¥–∏–Ω–∏—Ü—ã, –Ω–∞–∑—ã–≤–∞–µ–º—ã–µ **–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏**

---
–ú—ã –±—É–¥–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–∏–º –Ω–∞ `ALT Linux p11`,  –æ—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º—ã–µ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤—ã:
- `docker-engine`
- `docker-compose-v2`

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–æ–≤:
```bash
apt-get update && apt-get install docker-engine docker-compose-v2 -y
```


–ò—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –≤ –¥–∞–Ω–Ω–æ–º –±–ª–æ–∫–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- üì¶[Docker | ALT Linux](https://www.altlinux.org/Docker)
- üîç[–î–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤ docker-compose-v2 | ALT Linux](https://packages.altlinux.org/ru/sisyphus/srpms/docker-compose-v2/)
---
> [!EXAMPLE] –ö–æ–º–∞–Ω–¥—ã docker
> - create ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏–∑ –æ–±—Ä–∞–∑–∞;
> - start ‚Äî –∑–∞–ø—É—Å–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –ø—Ä–∏–º–µ—Ä: `docker start my_container`;
> - restart ‚Äî –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –ø—Ä–∏–º–µ—Ä: `docker restart my_container`;
> - run ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏ –µ–≥–æ –∑–∞–ø—É—Å–∫, –ø—Ä–∏–º–µ—Ä: `docker run my_image -it bash`;
> - build ‚Äî —Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞, –ø—Ä–∏–º–µ—Ä: `docker build -t my_image .`;
> - push ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ–±—Ä–∞–∑–∞ –≤ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Ä–µ–µ—Å—Ç—Ä, –ø—Ä–∏–º–µ—Ä: `docker push my_image`;
> - images ‚Äî –≤—ã–≤–æ–¥ —Å–ø–∏—Å–∫–∞ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –æ–±—Ä–∞–∑–æ–≤ docker, –ø—Ä–∏–º–µ—Ä: `docker images`;
> -  pull ‚Äî –∑–∞–≥—Ä—É–∂–∞–µ—Ç –æ–±—Ä–∞–∑ –∏–∑ —Ä–µ–µ—Å—Ç—Ä–∞ Docker Hub, –ø—Ä–∏–º–µ—Ä: `docker pull`;
> - search ‚Äî –∫–æ–º–∞–Ω–¥–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –æ–±—Ä–∞–∑–æ–≤ –Ω–∞ Docker Hub, –ø—Ä–∏–º–µ—Ä: `docker search nginx`;
> - history ‚Äî –≤—ã–≤–æ–¥ —Å–≤–µ–¥–µ–Ω–∏–π –æ —Å–ª–æ—è—Ö –æ–±—Ä–∞–∑–∞, –ø—Ä–∏–º–µ—Ä: `docker history nginx`;
> - ps ‚Äî –≤—ã–≤–æ–¥ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ `docker ps`; 
> - cp ‚Äî –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∏ –∫–∞—Ç–∞–ª–æ–≥–æ–≤ –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∞ —Ö–æ—Å—Ç –∏ –Ω–∞–æ–±–æ—Ä–æ—Ç, –ø—Ä–∏–º–µ—Ä: `docker cp :/etc/file` - –∫–æ–ø–∏—Ä—É–µ–º /etc/file –≤ —Ç–µ–∫—É—â–∏–π –∫–∞—Ç–∞–ª–æ–≥;
> - inspect ‚Äî –≤—ã–≤–æ–¥ –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ;
> - logs ‚Äî –≤—ã–≤–æ–¥ –ª–æ–≥–æ–≤, –ø—Ä–∏–º–µ—Ä: `docker logs my_container`;
> - stop ‚Äî –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≥–ª–∞–≤–Ω–æ–º—É –ø—Ä–æ—Ü–µ—Å—Å—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å–∏–≥–Ω–∞–ª–∞ SIERM, –∏, —á–µ—Ä–µ–∑ –≤—Ä–µ–º—è, SIGKILL, –ø—Ä–∏–º–µ—Ä: `docker stop <container_id_or_name> –∏–ª–∏ $(docker ps -a -q)`, –≥–¥–µ –≤—Ç–æ—Ä–æ–µ - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤;
> - kill ‚Äî –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≥–ª–∞–≤–Ω–æ–º—É –ø—Ä–æ—Ü–µ—Å—Å—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å–∏–≥–Ω–∞–ª–∞ SIGKILL, –ø—Ä–∏–º–µ—Ä: `docker kill <container_id_or_name>`;
> - rm/rmi ‚Äî—É–¥–∞–ª–µ–Ω–∏–µ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ **–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**, –ø—Ä–∏–º–µ—Ä: `docker rm <container_id_or_name>`–∏–ª–∏ **–æ–±—Ä–∞–∑–∞** –ø—Ä–∏–º–µ—Ä —É–¥–∞–ª–µ–Ω–∏—è: `docker rmi <image_name>`.

 **–ù–µ–∫–æ—Ç–æ—Ä—ã–µ** –∏–∑ –∫–æ–º–∞–Ω–¥:
`docker version` ‚Äî –≤—ã–≤–æ–¥ —Å–≤–µ–¥–µ–Ω–∏–π –æ –≤–µ—Ä—Å–∏—è—Ö –∫–ª–∏–µ–Ω—Ç–∞ –∏ —Å–µ—Ä–≤–µ—Ä–∞ Docker;
`docker login` ‚Äî –≤—Ö–æ–¥ –≤ —Ä–µ–µ—Å—Ç—Ä Docker;
`docker system prune` ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, —Å–µ—Ç–µ–π –∏ –æ–±—Ä–∞–∑–æ–≤, –∫–æ—Ç–æ—Ä—ã–º –Ω–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–æ –∏–º—è –∏ —Ç–µ–≥.

–ò—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –≤ –¥–∞–Ω–Ω–æ–º –±–ª–æ–∫–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- üêã[–ò–∑—É—á–∞–µ–º Docker, —á–∞—Å—Ç—å 5: –∫–æ–º–∞–Ω–¥—ã](https://habr.com/ru/companies/ruvds/articles/440660/)
---
### –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–∞ Docker Swarm
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∫–æ–≥–¥–∞ –¥–µ–º–æ–Ω Docker –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Ä–∞–±–æ—Ç—É, –æ–Ω –æ—Ç–∫–ª—é—á–∞–µ—Ç –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, –Ω–æ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–µ–º–æ–Ω —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ–±—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø—Ä–æ–¥–æ–ª–∂–∞–ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å, –µ—Å–ª–∏ –¥–µ–º–æ–Ω —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–º. –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **Live-Restore**. –§—É–Ω–∫—Ü–∏—è –ø–æ–º–æ–≥–∞–µ—Ç —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –≤—Ä–µ–º—è –ø—Ä–æ—Å—Ç–æ—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏–∑-–∑–∞ —Å–±–æ–µ–≤ –≤ —Ä–∞–±–æ—Ç–µ –¥–µ–º–æ–Ω–∞, –ø–ª–∞–Ω–æ–≤—ã—Ö –æ—Ç–∫–ª—é—á–µ–Ω–∏–π –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π.
```bash
vim /etc/docker/daemon.json
# –í –¥–∞–Ω–Ω–æ–∏–º –∫–æ–Ω—Ñ–∏–≥–µ –º—ã –∏—â–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä live-restore:
> "live-resote": false
```
#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤—ã—Å—Ç—É–ø–∞—Ç—å –≤ —Ä–æ–ª–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–º–∞–Ω–¥—ã "**docker swarm init**", –∫–æ—Ç–æ—Ä—ã–π –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¥–≤–∞ —Å–ª—É—á–∞–π–Ω—ã—Ö —Ç–æ–∫–µ–Ω–∞, –æ–¥–∏–Ω - —Ä–∞–±–æ—á–∏–π, –≤—Ç–æ—Ä–æ–π - —Ç–æ–∫–µ–Ω –º–µ–Ω–µ–¥–∂–µ—Ä–∞. –ö–æ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–π —É–∑–µ–ª –∫ swarm, —É–∑–µ–ª –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ—Ç—Å—è –∫–∞–∫ —Ä–∞–±–æ—á–∏–π –∏–ª–∏ —É–ø—Ä–∞–≤–ª—è—é—â–∏–π —É–∑–µ–ª –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–æ–∫–µ–Ω–∞. –ß—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –≤ —ç—Ç–æ—Ç swarm –∑–∞–ø—É—Å–∫–∞–µ–º "**docker swarm join-token manager <–¢–û–ö–ï–ù, –ö–û–¢–û–†–´–ô –ë–´–õ –í–´–î–ê–ù –ù–ê –ü–ï–†–í–û–ú –ú–ê–°–¢–ï–†–ï>**" –∏ —Å–ª–µ–¥—É–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏.
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–∞ –º–æ–∂–Ω–æ —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã "**docker node ls**", –æ—Ç–æ–±—Ä–∞–∑–∏—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —É–∑–ª–æ–≤, –æ –∫–æ—Ç–æ—Ä—ã—Ö –∏–∑–≤–µ—Å—Ç–Ω–æ –¥–∏—Å–ø–µ—Ç—á–µ—Ä—É Docker Swarm.
#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–æ—Ä–∫–µ—Ä–æ–≤
–ù–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –≤—ã—Å—Ç—É–ø–∞—Ç—å –≤ —Ä–æ–ª–∏ —Ä–∞–±–æ—á–∏—Ö (worker) –Ω–æ–¥: —É–∑–µ–ª –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ—Ç—Å—è –∫–∞–∫ —É–ø—Ä–∞–≤–ª—è—é—â–∏–π —É–∑–µ–ª –∏–ª–∏ —Ä–∞–±–æ—á–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–æ–∫–µ–Ω–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —Å —Ñ–ª–∞–≥–æ–º --token.
- –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–µ—Ç —Ç–æ–∫–µ–Ω –º–µ–Ω–µ–¥–∂–µ—Ä–∞ (master), —É–∑–µ–ª –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ—Ç—Å—è –∫–∞–∫ –º–µ–Ω–µ–¥–∂–µ—Ä;
- –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —Ç–æ–∫–µ–Ω —Ä–∞–±–æ—Ç–Ω–∏–∫–∞ (worker), —É–∑–µ–ª –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ—Ç—Å—è –∫–∞–∫ —Ä–∞–±–æ—á–∏–π.
#### –£–¥–∞–ª–µ–Ω–∏–µ –Ω–æ–¥
–ù–∞ —Å–µ–≤–µ—Ä–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –≤—ã—Å—Ç—É–ø–∞—Ç—å –≤ —Ä–æ–ª–∏ —Ä–∞–±–æ—á–∏—Ö (worker) –Ω–æ–¥: –∫–æ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã "**docker swarm leave**" –Ω–∞ —Ä–∞–±–æ—á–µ–π –Ω–æ–¥–µ, —ç—Ç–æ—Ç —Ä–∞–±–æ—Ç–Ω–∏–∫ –ø–æ–∫–∏–¥–∞–µ—Ç –∫–ª–∞—Å—Ç–µ—Ä.
–£–∑–µ–ª –ø–æ –ø—Ä–µ–∂–Ω–µ–º—É –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ —Å–ø–∏—Å–∫–µ —É–∑–ª–æ–≤ –∏ –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–π (down) - "**docker node ls**". –≠—Ç–æ –±–æ–ª—å—à–µ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–∞–±–æ—Ç—É swarm, –Ω–æ –¥–ª–∏–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö —É–∑–ª–æ–≤ –º–æ–∂–µ—Ç –∑–∞–≥—Ä–æ–º–æ–∂–¥–∞—Ç—å —Å–ø–∏—Å–æ–∫ —É–∑–ª–æ–≤. –ß—Ç–æ–±—ã —É–¥–∞–ª–∏—Ç—å –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–π —É–∑–µ–ª –∏–∑ —Å–ø–∏—Å–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞ "**docker node rm <–•–æ—Å—Ç–Ω–µ–π–º-–º–∞—à–∏–Ω—ã>**".

---

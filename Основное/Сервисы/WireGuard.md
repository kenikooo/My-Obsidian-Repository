— Перейти в [[HUB]] —
>[!INFO] Что такое **Wireguard**?
Cовременный, быстрый и безопасный протокол VPN (виртуальной частной сети) с открытым исходным кодом.

---
### Весь пример будет показан под ALT Linux

##### На других ОС всё будет аналогично, будет отличаться лишь процесс установки и расположение директорий

> [!INFO] Используемые дистрибутивы
> 
> - **wireguard** — на Debian 12
> - **wg-quick**
> - **wireguard-tools**

> [!BUG] Устанавливаем дистрибутивы
```bash
apt-get install wg-quick wireguard-tools
```
> [!NOTE] В примере будет два устройства из офисов HQ и BR

### Генерация ключей

Для начала нам нужно сгенерировать публичный и приватный ключи:

```bash
wg genkey | tee privatekey | wg pubkey > publickey
```

Для удобства переместим ключи в основную директорию:

```bash
mv privatekey /etc/wireguard  
mv publickey /etc/wireguard  
```

### Создание конфигурационного файла

Создадим конфигурационный файл **wg0.conf**:

```bash
vim /etc/wireguard/wg0.conf
```

> [!INFO] Конфигурация для HQ

```ini
[Interface]
PrivateKey = <Приватный ключ HQ>
Address = 192.168.200.1/24 # IP-Адрес устройства
ListenPort = 51820 # Порт прослушивания

[Peer]
PublicKey = <Публичный ключ BR>
AllowedIPs = 192.168.200.2/32, 192.168.100.0/24 # Разрешённые сети
```

> [!INFO] Конфигурация для BR

```ini
[Interface]
PrivateKey = <Приватный ключ BR>
Address = 192.168.200.2/24 # IP-Адрес устройства
ListenPort = 51820 # Порт прослушивания

[Peer]
PublicKey = <Публичный ключ HQ>
AllowedIPs = 192.168.200.1/32, 192.168.100.0/24 # Разрешённые сети
Endpoint = <Адрес HQ>
PersistentKeepalive = 25
```

### Определение адреса оконечного устройства

Чтобы узнать адрес интерфейса, используем команду:

```bash
ip -c a
```

На BR записываем адрес интерфейса **enp0s3**, на HQ аналогично — записываем адрес BR.

---
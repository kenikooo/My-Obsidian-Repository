— Перейти в [[HUB]] —
> [!INFO] Что такое **NTP**?
Протокол, используемый для точной синхронизации часов на компьютерах и других устройствах через сеть, например, через Интернет.

Вся настройка будет осуществляться на **_ALT Linux_**

> [!INFO] Используемые дистрибутивы chrony

```bash
# chrony идет из коробки к ALT Linux
```

Проведем первоначальную настройку по пути `/etc/chrony.conf`:

```bash
# Список серверов времени
server ntp.sniim.ru iburst
# Разрешим клиентов (их сети), которым будет разрешена синхронизация с нашим сервером
allow 192.168.100.64/26
allow 192.168.100.0/27
# Указываем уровень надежности (10-15 - ненадежные источники)
local stratum 5
```

> [!WARNING] Предупреждение Если **СЕРВЕР** получает время из интернета, лучше **НЕ** устанавливать `local stratum`, а настроить `server` с внешними источниками.

После внесения изменений перезапустим `chronyd`:

```bash
systemctl restart chronyd
systemctl enable --now chronyd
```

### Настройка клиентов

Для синхронизации заходим в файл по тому же пути, что и на сервере `/etc/chrony.conf`:

```bash
server 192.168.100.2 iburst # Указываем IP-адрес сервера, который был настроен в качестве NTP-сервера
```

Применяем изменения:

```bash
systemctl restart chronyd
systemctl enable --now chronyd
```

### Проверка работы

```bash
chronyc sources -v
timedatectl
```

---

### Windows 10 Pro

Настроить синхронизацию можно через **PowerShell**:

```powershell
w32tm /config /manualpeerlist:"192.168.100.2" /syncfromflags:manual /update
w32tm /resync
w32tm /query /status
```

Или же можно настроить вручную через "Дата и время", если присутствует графический интерфейс.